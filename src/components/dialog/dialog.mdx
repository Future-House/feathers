import { Meta, Story } from '@storybook/addon-docs/blocks';
import {
  DocLayout,
  Canvas,
  PropsTable,
  parseSubcomponents,
} from '../../../.storybook/components';
import * as DialogStories from './dialog.stories';

<Meta of={DialogStories} />

<DocLayout meta={DialogStories.default}>
  ## Default Example

<Canvas of={DialogStories.Default} background="dots" />

## Component API

### Dialog

A window overlaid on either the primary window or another dialog window, rendering the content underneath inert. Built with Radix UI Dialog primitives and styled with Tailwind CSS.

<PropsTable argTypes={DialogStories.default.argTypes} />

{(
() => {
const subcomponents = parseSubcomponents(DialogStories.default.subcomponents);
return subcomponents.map((sub) => (

<div key={sub.name}>
  <h3 className="sb-unstyled text-foreground mt-6 mb-3 text-xl font-bold">
    {sub.name}
  </h3>
  {sub.description && (
    <p className="sb-unstyled text-muted-foreground mb-4 text-base">
      {sub.description}
    </p>
  )}
  <PropsTable
    title={`${sub.name} Props`}
    argTypes={DialogStories.default.subcomponents[sub.name].argTypes}
  />
</div>
)); }) ()}

## Examples

### Edit Profile

A dialog for editing user profile information with form fields.

<Canvas of={DialogStories.EditProfile} background="grid" />

### Confirmation Dialog

A destructive action confirmation dialog with warnings.

<Canvas of={DialogStories.ConfirmationDialog} background="muted" />

### Newsletter Signup

A dialog for newsletter subscription with checkboxes and form validation.

<Canvas of={DialogStories.NewsletterSignup} background="card" />

### Success Message

A centered success dialog with positive feedback.

<Canvas of={DialogStories.SuccessMessage} background="transparent" />

### Settings Dialog

A complex settings dialog with multiple sections and scroll support.

<Canvas of={DialogStories.SettingsDialog} background="default" />

### Without Close Button

A dialog that requires explicit action selection, with no close button.

<Canvas of={DialogStories.WithoutCloseButton} background="dots" />

## Accessibility

The `Dialog` component follows the [WAI-ARIA Dialog design pattern](https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal/) and includes:

- Focus trapping within the dialog when open
- Escape key to close the dialog
- Proper ARIA attributes for screen readers
- Backdrop click to close (when not disabled)
- Focus return to the trigger element when closed
- Proper heading structure with DialogTitle
- Optional description support with DialogDescription

## Best Practices

- Always provide a clear title for the dialog
- Include a description for complex dialogs
- Use appropriate button variants (primary for confirm, outline for cancel)
- Consider the dialog size and content scrolling for mobile devices
- Provide clear action buttons and avoid ambiguous labels
- Use confirmation dialogs for destructive actions
- Test keyboard navigation and screen reader accessibility
- Position important actions prominently (typically on the right)

</DocLayout>
