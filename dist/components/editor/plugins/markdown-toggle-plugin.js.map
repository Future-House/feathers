{"version":3,"file":"markdown-toggle-plugin.js","names":["React","useLexicalComposerContext","$convertFromMarkdownString","$convertToMarkdownString","TRANSFORMERS","$createCodeNode","$isCodeNode","$getRoot","$createTextNode","Document","FileText","cn","Button","Tooltip","TooltipContent","TooltipTrigger","jsx","_jsx","jsxs","_jsxs","MarkdownTogglePlugin","t0","$","_c","className","_useLexicalComposerCo","_useLexicalComposerCo2","_slicedToArray","editor","t1","update","_temp","handleMarkdownToggle","t2","t3","Symbol","for","t4","asChild","children","variant","size","t5","t6","root","firstChild","getFirstChild","getLanguage","getTextContent","markdown","clear","codeNode","append"],"sources":["../../../../src/components/editor/plugins/markdown-toggle-plugin.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport {\n  $convertFromMarkdownString,\n  $convertToMarkdownString,\n  TRANSFORMERS,\n} from '@lexical/markdown';\nimport { $createCodeNode, $isCodeNode } from '@lexical/code';\nimport { $getRoot, $createTextNode } from 'lexical';\nimport { Document as FileText } from '@/icons';\n\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/button';\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@/components/tooltip';\n\nexport function MarkdownTogglePlugin({ className }: { className?: string }) {\n  const [editor] = useLexicalComposerContext();\n\n  const handleMarkdownToggle = React.useCallback(() => {\n    editor.update(() => {\n      const root = $getRoot();\n      const firstChild = root.getFirstChild();\n\n      if ($isCodeNode(firstChild) && firstChild.getLanguage() === 'markdown') {\n        // Convert from markdown to rich text\n        $convertFromMarkdownString(firstChild.getTextContent(), TRANSFORMERS);\n      } else {\n        // Convert from rich text to markdown\n        const markdown = $convertToMarkdownString(TRANSFORMERS);\n        root.clear();\n        const codeNode = $createCodeNode('markdown');\n        codeNode.append($createTextNode(markdown));\n        root.append(codeNode);\n      }\n    });\n  }, [editor]);\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={handleMarkdownToggle}\n          className={cn('px-2', className)}\n          aria-label=\"Toggle Markdown Editor\"\n        >\n          <FileText className=\"size-4\" />\n        </Button>\n      </TooltipTrigger>\n      <TooltipContent>\n        <p>Toggle Markdown Editor</p>\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"],"mappings":"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","ignoreList":[]}